{"version":3,"file":"react-restyle.cjs.production.min.js","sources":["../src/restyle.tsx","../src/utils.ts"],"sourcesContent":["import * as React from 'react';\n\nexport interface ClassMap {\n    [key: string]: string | undefined;\n}\n\nexport type ClassName = string | ClassMap;\ntype ClassNames = String & ClassMap;\n\nexport interface StyleMap {\n    isStyleMap: boolean;\n    [key: string]: React.CSSProperties | boolean;\n}\n\nfunction isStyleMap(\n    styles?: StyleMap | React.CSSProperties\n): styles is StyleMap {\n    let maybeMap = styles as StyleMap;\n    return maybeMap?.isStyleMap === true;\n}\n\nfunction createStyleMap(styles: Styles): StyleMap {\n    return { isStyleMap: true, ...styles };\n}\n\nexport type Style = React.CSSProperties | StyleMap;\ntype Styles = { [key: string]: React.CSSProperties };\n\nexport interface DefaultStyles {\n    rootKey?: string;\n    classes?: ClassMap | string;\n    styles?: StyleMap | React.CSSProperties;\n}\n\ninterface ComposedStyle {\n    className: ClassNames;\n    style: Styles;\n}\n\nfunction composeStyles(\n    defaultStyles: DefaultStyles,\n    props: { className?: ClassName; style?: Style }\n): ComposedStyle {\n    const rootKey = defaultStyles.rootKey || 'root';\n    const { className, style } = props;\n\n    let classes;\n    if (typeof defaultStyles.classes === 'string')\n        classes = { [rootKey]: defaultStyles.classes };\n    else classes = { ...defaultStyles.classes };\n\n    if (typeof className === 'string') classes[rootKey] = className;\n    else if (className) Object.assign(classes, className);\n\n    // use a string wrapper object for backward-compatibility with the\n    // standard className prop (`String` is coerced to `string`)\n    // eslint-disable-next-line no-new-wrappers\n    let classNames = new String(classes[rootKey] || '') as ClassNames;\n    Object.assign(classNames, classes);\n\n    let styles;\n    if (isStyleMap(defaultStyles.styles)) styles = { ...defaultStyles.styles };\n    else styles = { [rootKey]: { ...defaultStyles.styles } };\n\n    if (isStyleMap(style)) Object.assign(styles, style);\n    else if (style) styles[rootKey] = style;\n\n    return { className: classNames, style: styles as Styles };\n}\n\nexport type PropsWithStyles<P> = P & { className?: ClassNames; style?: Styles };\n\nexport interface RestyleableComponent<P = any>\n    extends React.ForwardRefExoticComponent<P & PropsWithStyles<P>> {\n    defaultStyles: DefaultStyles;\n}\n\nfunction withStyles(\n    Component: React.ComponentType,\n    defaultStyles: DefaultStyles\n) {\n    const forwardRef: Partial<RestyleableComponent> = React.forwardRef(\n        (props, ref) => {\n            if (!forwardRef.defaultStyles) {\n                forwardRef.defaultStyles = defaultStyles;\n            }\n            const { className, style } = composeStyles(\n                forwardRef.defaultStyles,\n                props\n            );\n            return (\n                <Component\n                    {...props}\n                    ref={ref}\n                    className={className}\n                    style={style}\n                />\n            );\n        }\n    );\n    forwardRef.displayName = Component.displayName || Component.name;\n    forwardRef.defaultStyles = defaultStyles;\n    return forwardRef as RestyleableComponent;\n}\n\nexport { composeStyles, withStyles, createStyleMap };\n","function removeClass(classes: string, remove: string | string[]) {\n    if (typeof remove === 'string') remove = remove.split(' ');\n    return (\n        classes\n            .split(' ')\n            .filter(c => !remove.includes(c))\n            .join(' ') + ' '\n    );\n}\n\nexport { removeClass };\n"],"names":["isStyleMap","styles","maybeMap","composeStyles","defaultStyles","props","classes","rootKey","className","style","Object","assign","classNames","String","remove","split","filter","c","includes","join","Component","forwardRef","React","ref","displayName","name"],"mappings":"0SAcA,SAASA,EACLC,UAGgC,KAAzBC,MADQD,SAAAA,EACED,YAqBrB,SAASG,EACLC,EACAC,WAKIC,EAHEC,EAAUH,EAAcG,SAAW,OACjCC,EAAqBH,EAArBG,UAAWC,EAAUJ,EAAVI,MAGkB,iBAA1BL,EAAcE,gBACRC,GAAUH,EAAcE,QAArCA,KACCA,OAAeF,EAAcE,SAET,iBAAdE,EAAwBF,EAAQC,GAAWC,EAC7CA,GAAWE,OAAOC,OAAOL,EAASE,OAQvCP,EAHAW,EAAa,IAAIC,OAAOP,EAAQC,IAAY,WAChDG,OAAOC,OAAOC,EAAYN,GAGtBN,EAAWI,EAAcH,QAASA,OAAcG,EAAcH,gBACjDM,QAAeH,EAAcH,QAAzCA,KAEDD,EAAWS,GAAQC,OAAOC,OAAOV,EAAQQ,GACpCA,IAAOR,EAAOM,GAAWE,GAE3B,CAAED,UAAWI,EAAYH,MAAOR,kDA9C3C,SAAwBA,aACXD,YAAY,GAASC,wBCtBlC,SAAqBK,EAAiBQ,SACZ,iBAAXA,IAAqBA,EAASA,EAAOC,MAAM,MAElDT,EACKS,MAAM,KACNC,QAAO,SAAAC,UAAMH,EAAOI,SAASD,MAC7BE,KAAK,KAAO,wBDuEzB,SACIC,EACAhB,OAEMiB,EAA4CC,cAC9C,SAACjB,EAAOkB,GACCF,EAAWjB,gBACZiB,EAAWjB,cAAgBA,SAEFD,EACzBkB,EAAWjB,cACXC,UAGAiB,gBAACF,mBACOf,GACJkB,IAAKA,EACLf,YARAA,UASAC,QATWA,mBAc3BY,EAAWG,YAAcJ,EAAUI,aAAeJ,EAAUK,KAC5DJ,EAAWjB,cAAgBA,EACpBiB"}